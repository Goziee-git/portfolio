server {
    listen 80;
    # CHANGE NEEDED ON EC2: Change 'localhost' to '_' to accept any hostname (including EC2 public IP)
    # Command: sudo sed -i 's/server_name localhost;/server_name _;/' /etc/nginx/sites-available/portfolio
    server_name _;

    # IMPORTANT: Update this path to match your actual portfolio location on EC2
    # If your portfolio is at /home/ubuntu/portfolio, change 'prospa' to 'ubuntu'
    location /static/ {
        alias /home/ubuntu/portfolio/staticfiles/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    location / {
        # IMPORTANT: Update socket path to match your actual portfolio location on EC2
        # If your portfolio is at /home/ubuntu/portfolio, change 'prospa' to 'ubuntu'
        proxy_pass http://unix:/home/ubuntu/portfolio/portfolio.sock;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
